# –ò–∑–º–µ–Ω–µ–Ω–∏—è: –ü—Ä–æ–≥—Ä–∞–º–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

## ‚úÖ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —Ä–∞–±–æ—Ç—ã –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç, —Ä–∞–±–æ—Ç–∞—é—Ç –ª–∏ –æ–Ω–∏ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ:

- `scripts/setup_env.py` - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—É—Ç—å –∫ .env (`/app/.env` –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ)
- `scripts/create_user.py` - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—É—Ç—å –∫ src (`/app/src` –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ)
- `scripts/wait_for_db.py` - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—É—Ç—å –∫ src (`/app/src` –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ)
- `scripts/cleanup_env.py` - –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—É—Ç—å –∫ .env (`/app/.env` –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ)

### 2. –ü–µ—Ä–µ–∏–º–µ–Ω–æ–≤–∞–Ω—ã –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ë–î

–ó–∞–º–µ–Ω–µ–Ω—ã `POSTGRES_*` –Ω–∞ `DB_*`:
- ‚úÖ `DB_USER` (–±—ã–ª–æ `POSTGRES_USER`)
- ‚úÖ `DB_PASSWORD` (–±—ã–ª–æ `POSTGRES_PASSWORD`)
- ‚úÖ `DB_NAME` (–±—ã–ª–æ `POSTGRES_DB`)
- ‚úÖ `DB_PORT` (–±—ã–ª–æ `POSTGRES_PORT`)
- ‚úÖ `DATABASE_URL` - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Ñ–æ—Ä–º–∏—Ä—É–µ—Ç—Å—è –∏–∑ `DB_*`

–í `docker-compose.yml` –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ `DB_*` –º–∞–ø–ø—è—Ç—Å—è –Ω–∞ `POSTGRES_*` –¥–ª—è –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞ PostgreSQL.

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

–°–æ–∑–¥–∞–Ω—ã/–æ–±–Ω–æ–≤–ª–µ–Ω—ã —Ñ–∞–π–ª—ã:
- `DOCKER_ONLY.md` - –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–±–æ—Ç–µ —Ç–æ–ª—å–∫–æ –≤ Docker
- `scripts/README.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø–æ —Å–∫—Ä–∏–ø—Ç–∞–º
- `DATABASE_CONFIG.md` - –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è –ë–î –±–µ–∑ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è
- –û–±–Ω–æ–≤–ª–µ–Ω—ã `README_AUTH.md` –∏ `DOCKER_SETUP.md`

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø—É—Ç–µ–π –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ

```
/app/
‚îú‚îÄ‚îÄ .env              # –§–∞–π–ª –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–∏
‚îú‚îÄ‚îÄ src/              # –ò—Å—Ö–æ–¥–Ω—ã–π –∫–æ–¥
‚îÇ   ‚îî‚îÄ‚îÄ invoiceparser/
‚îú‚îÄ‚îÄ scripts/          # –°–∫—Ä–∏–ø—Ç—ã
‚îÇ   ‚îú‚îÄ‚îÄ create_user.py
‚îÇ   ‚îú‚îÄ‚îÄ generate_jwt_secret.py
‚îÇ   ‚îú‚îÄ‚îÄ setup_env.py
‚îÇ   ‚îú‚îÄ‚îÄ wait_for_db.py
‚îÇ   ‚îî‚îÄ‚îÄ cleanup_env.py
‚îî‚îÄ‚îÄ alembic/          # –ú–∏–≥—Ä–∞—Ü–∏–∏
```

## üîß –ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å

### –í—Å–µ –∫–æ–º–∞–Ω–¥—ã —á–µ—Ä–µ–∑ Docker:

```bash
# –°–æ–∑–¥–∞–Ω–∏–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
docker-compose exec app python scripts/create_user.py admin admin123 admin@example.com

# –ì–µ–Ω–µ—Ä–∞—Ü–∏—è JWT –∫–ª—é—á–∞
docker-compose exec app python scripts/generate_jwt_secret.py

# –ó–∞–ø—É—Å–∫ –º–∏–≥—Ä–∞—Ü–∏–π
docker-compose exec app python -m alembic upgrade head

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ë–î
docker-compose exec db psql -U invoiceparser -d invoiceparser -c "SELECT * FROM users;"
```

### ‚ùå –ù–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω–æ:

```bash
# –ù–ï –†–ê–ë–û–¢–ê–ï–¢ - –Ω–µ—Ç –¥–æ—Å—Ç—É–ø–∞ –∫ –ë–î
python scripts/create_user.py admin admin123

# –ù–ï –†–ê–ë–û–¢–ê–ï–¢ - –Ω–µ—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
python -m alembic upgrade head
```

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

–í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã –ø—Ä–æ–≤–µ—Ä—è—é—Ç –Ω–∞–ª–∏—á–∏–µ –ø—É—Ç–µ–π –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞:

```python
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ
if Path('/app/.env').exists():
    # –í –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
    env_path = Path('/app/.env')
else:
    # –õ–æ–∫–∞–ª—å–Ω–æ (–Ω–µ —Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
    env_path = project_root / '.env'
```

## üìù –†–µ–∑—é–º–µ

- ‚úÖ –í—Å–µ —Å–∫—Ä–∏–ø—Ç—ã —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
- ‚úÖ –£–±—Ä–∞–Ω—ã –¥—É–±–ª–∏—Ä—É—é—â–∏–µ—Å—è –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –ë–î
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- ‚úÖ –í—Å–µ –∫–æ–º–∞–Ω–¥—ã —á–µ—Ä–µ–∑ `docker-compose exec app`

**–ü—Ä–æ–≥—Ä–∞–º–º–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç —Ç–æ–ª—å–∫–æ –≤ Docker –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ!**

