# –ß—Ç–æ —Ç–∞–∫–æ–µ RAW –¥–∞–Ω–Ω—ã–µ?

## üìä RAW vs APPROVED

### RAW –¥–∞–Ω–Ω—ã–µ (—Å—ã—Ä—ã–µ –¥–∞–Ω–Ω—ã–µ)

**RAW –¥–∞–Ω–Ω—ã–µ** ‚Äî —ç—Ç–æ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ –∏—Å–∫—É—Å—Å—Ç–≤–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–æ–º (Gemini AI) **–î–û** –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è —á–µ–ª–æ–≤–µ–∫–æ–º.

#### –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ RAW –¥–∞–Ω–Ω—ã—Ö:

1. **–ò—Å—Ç–æ—á–Ω–∏–∫:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π –ø–∞—Ä—Å–∏–Ω–≥ —á–µ—Ä–µ–∑ AI (Gemini)
2. **–¢–æ—á–Ω–æ—Å—Ç—å:** –ú–æ–∂–µ—Ç —Å–æ–¥–µ—Ä–∂–∞—Ç—å –æ—à–∏–±–∫–∏ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è
3. **–°—Ç–∞—Ç—É—Å:** `status = 'parsed'` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
4. **–ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞—é—Ç—Å—è:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –ø–∞—Ä—Å–∏–Ω–≥–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞
5. **–ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è:**
   - `document_snapshots` —Å `snapshot_type='raw'`
   - `document_fields` —Å `raw_value_*`
   - `document_table_sections` —Å `rows_raw`

#### –ü—Ä–∏–º–µ—Ä RAW –¥–∞–Ω–Ω—ã—Ö:

```json
{
  "header": {
    "invoice_number": "INV-2024-001",  // AI —Ä–∞—Å–ø–æ–∑–Ω–∞–ª
    "date": "2024-01-15",              // AI —Ä–∞—Å–ø–æ–∑–Ω–∞–ª
    "supplier_name": "–¢–û–í '–ö–æ–º–ø–∞–Ω—ñ—è'",  // –ú–æ–∂–µ—Ç –±—ã—Ç—å —Å –æ—à–∏–±–∫–æ–π
    "total_amount": 15000.50
  },
  "items": [
    {
      "name": "–¢–æ–≤–∞—Ä 1",               // AI —Ä–∞—Å–ø–æ–∑–Ω–∞–ª
      "quantity": 10,                   // –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Ç–æ—á–Ω—ã–º
      "price": 1500.05
    }
  ]
}
```

**–ü—Ä–æ–±–ª–µ–º—ã RAW –¥–∞–Ω–Ω—ã—Ö:**
- –ú–æ–≥—É—Ç –±—ã—Ç—å –æ–ø–µ—á–∞—Ç–∫–∏ –≤ –Ω–∞–∑–≤–∞–Ω–∏—è—Ö –∫–æ–º–ø–∞–Ω–∏–π
- –ù–µ—Ç–æ—á–Ω—ã–µ —á–∏—Å–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, 10 –≤–º–µ—Å—Ç–æ 100)
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ –¥–∞—Ç
- –ü—Ä–æ–ø—É—â–µ–Ω–Ω—ã–µ –ø–æ–ª—è
- –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ç–∞–±–ª–∏—Ü

---

### APPROVED –¥–∞–Ω–Ω—ã–µ (–ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ)

**APPROVED –¥–∞–Ω–Ω—ã–µ** ‚Äî —ç—Ç–æ –¥–∞–Ω–Ω—ã–µ, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ **–ø—Ä–æ–≤–µ—Ä–µ–Ω—ã –∏ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω—ã —á–µ–ª–æ–≤–µ–∫–æ–º** –ø–æ—Å–ª–µ –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ RAW –¥–∞–Ω–Ω—ã—Ö.

#### –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∏ APPROVED –¥–∞–Ω–Ω—ã—Ö:

1. **–ò—Å—Ç–æ—á–Ω–∏–∫:** –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ —á–µ–ª–æ–≤–µ–∫–æ–º
2. **–¢–æ—á–Ω–æ—Å—Ç—å:** –í—ã—Å–æ–∫–∞—è (–ø—Ä–æ–≤–µ—Ä–µ–Ω–∞ —á–µ–ª–æ–≤–µ–∫–æ–º)
3. **–°—Ç–∞—Ç—É—Å:** `status = 'approved'` –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö
4. **–ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞—é—Ç—Å—è:** –ü–æ—Å–ª–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏—è —á–µ—Ä–µ–∑ Web UI (`POST /api/save`)
5. **–ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è:**
   - `document_snapshots` —Å `snapshot_type='approved'`
   - `document_fields` —Å `approved_value_*`
   - `document_table_sections` —Å `rows_approved`

#### –ü—Ä–∏–º–µ—Ä APPROVED –¥–∞–Ω–Ω—ã—Ö (–ø–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è):

```json
{
  "header": {
    "invoice_number": "INV-2024-001",     // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —á–µ–ª–æ–≤–µ–∫–æ–º
    "date": "2024-01-15",                 // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —á–µ–ª–æ–≤–µ–∫–æ–º
    "supplier_name": "–¢–û–í '–ö–æ–º–ø–∞–Ω—ñ—è'",     // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –±—ã–ª–æ "–ö–æ–º–ø–∞–Ωi—è"
    "total_amount": 15000.50
  },
  "items": [
    {
      "name": "–¢–æ–≤–∞—Ä 1",                  // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ —á–µ–ª–æ–≤–µ–∫–æ–º
      "quantity": 100,                     // –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–æ: –±—ã–ª–æ 10
      "price": 1500.05
    }
  ]
}
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ APPROVED –¥–∞–Ω–Ω—ã—Ö:**
- ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω—ã —á–µ–ª–æ–≤–µ–∫–æ–º
- ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –≤—Å–µ –æ—à–∏–±–∫–∏
- ‚úÖ –ì–æ—Ç–æ–≤—ã –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞ –≤ Excel/Google Sheets
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è –±–∏–∑–Ω–µ—Å-–ø—Ä–æ—Ü–µ—Å—Å–æ–≤

---

## üîÑ –ñ–∏–∑–Ω–µ–Ω–Ω—ã–π —Ü–∏–∫–ª –¥–∞–Ω–Ω—ã—Ö

```
1. –ó–∞–≥—Ä—É–∑–∫–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (Telegram/Web/Email)
    ‚Üì
2. –ü–∞—Ä—Å–∏–Ω–≥ —á–µ—Ä–µ–∑ AI (Gemini)
    ‚Üì
3. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ RAW –¥–∞–Ω–Ω—ã—Ö (–∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏)
    status = 'parsed'
    ‚Üì
4. –ü—Ä–æ—Å–º–æ—Ç—Ä RAW –¥–∞–Ω–Ω—ã—Ö –≤ Web UI
    ‚Üì
5. –†–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö —á–µ–ª–æ–≤–µ–∫–æ–º
    ‚Üì
6. –°–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ APPROVED –¥–∞–Ω–Ω—ã—Ö
    status = 'approved'
    ‚Üì
7. –≠–∫—Å–ø–æ—Ä—Ç APPROVED –¥–∞–Ω–Ω—ã—Ö
    (Excel, Google Sheets)
```

## üìä –°—Ä–∞–≤–Ω–µ–Ω–∏–µ RAW –∏ APPROVED

| –•–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞ | RAW | APPROVED |
|----------------|-----|----------|
| **–ò—Å—Ç–æ—á–Ω–∏–∫** | AI (Gemini) | –ß–µ–ª–æ–≤–µ–∫ |
| **–¢–æ—á–Ω–æ—Å—Ç—å** | –ú–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Ç–æ—á–Ω–æ–π | –í—ã—Å–æ–∫–∞—è |
| **–°—Ç–∞—Ç—É—Å –≤ –ë–î** | `'parsed'` | `'approved'` |
| **–ö–æ–≥–¥–∞ —Å–æ–∑–¥–∞—é—Ç—Å—è** | –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ | –ü–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ |
| **–ú–æ–∂–Ω–æ —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞—Ç—å** | –î–∞ (—á–µ—Ä–µ–∑ Web UI) | –î–∞ |
| **–ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –¥–ª—è —ç–∫—Å–ø–æ—Ä—Ç–∞** | ‚ùå –ù–µ—Ç | ‚úÖ –î–∞ |
| **–ú–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å** | ‚ùå –ù–µ—Ç (–∏—Å—Ö–æ–¥–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ) | ‚úÖ –î–∞ (–º–æ–∂–Ω–æ –æ—Ç–∫–ª–æ–Ω–∏—Ç—å) |

## üíæ –ì–¥–µ —Ö—Ä–∞–Ω—è—Ç—Å—è –≤ –±–∞–∑–µ –¥–∞–Ω–Ω—ã—Ö

### RAW –¥–∞–Ω–Ω—ã–µ:

```sql
-- –ü–æ–ª–Ω—ã–π JSON
SELECT payload FROM document_snapshots
WHERE document_id = 123 AND snapshot_type = 'raw';

-- –û—Ç–¥–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
SELECT field_code, raw_value_text
FROM document_fields
WHERE document_id = 123;

-- –¢–∞–±–ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
SELECT rows_raw FROM document_table_sections
WHERE document_id = 123;
```

### APPROVED –¥–∞–Ω–Ω—ã–µ:

```sql
-- –ü–æ–ª–Ω—ã–π JSON
SELECT payload FROM document_snapshots
WHERE document_id = 123 AND snapshot_type = 'approved';

-- –û—Ç–¥–µ–ª—å–Ω—ã–µ –ø–æ–ª—è
SELECT field_code, approved_value_text
FROM document_fields
WHERE document_id = 123;

-- –¢–∞–±–ª–∏—á–Ω—ã–µ –¥–∞–Ω–Ω—ã–µ
SELECT rows_approved FROM document_table_sections
WHERE document_id = 123;
```

## ‚ö†Ô∏è –í–∞–∂–Ω–æ

1. **RAW –¥–∞–Ω–Ω—ã–µ —Å–æ—Ö—Ä–∞–Ω—è—é—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏** ‚Äî –Ω–µ —Ç—Ä–µ–±—É—é—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è
2. **APPROVED –¥–∞–Ω–Ω—ã–µ —Å–æ–∑–¥–∞—é—Ç—Å—è —Ç–æ–ª—å–∫–æ –ø–æ—Å–ª–µ –ø—Ä–æ–≤–µ—Ä–∫–∏** —á–µ–ª–æ–≤–µ–∫–æ–º
3. **–û–±–∞ –Ω–∞–±–æ—Ä–∞ –¥–∞–Ω–Ω—ã—Ö —Ö—Ä–∞–Ω—è—Ç—Å—è –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ** ‚Äî –º–æ–∂–Ω–æ —Å—Ä–∞–≤–Ω–∏–≤–∞—Ç—å
4. **–≠–∫—Å–ø–æ—Ä—Ç –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç —Ç–æ–ª—å–∫–æ –∏–∑ APPROVED –¥–∞–Ω–Ω—ã—Ö** ‚Äî –≥–∞—Ä–∞–Ω—Ç–∏—è —Ç–æ—á–Ω–æ—Å—Ç–∏
5. **RAW –¥–∞–Ω–Ω—ã–µ –Ω–µ–ª—å–∑—è —É–¥–∞–ª–∏—Ç—å** ‚Äî —ç—Ç–æ –∏—Å—Ö–æ–¥–Ω—ã–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã AI
6. **APPROVED –¥–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å** ‚Äî –≤–µ—Ä–Ω—É—Ç—å —Å—Ç–∞—Ç—É—Å –≤ `'parsed'` –∏–ª–∏ `'rejected'`

## üîç –ó–∞—á–µ–º –Ω—É–∂–Ω—ã –æ–±–∞ –Ω–∞–±–æ—Ä–∞?

1. **–ê–Ω–∞–ª–∏–∑ –∫–∞—á–µ—Å—Ç–≤–∞ AI:**
   - –°—Ä–∞–≤–Ω–µ–Ω–∏–µ RAW –∏ APPROVED –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ç–æ—á–Ω–æ—Å—Ç—å –ø–∞—Ä—Å–∏–Ω–≥–∞
   - –ü–æ–º–æ–≥–∞–µ—Ç —É–ª—É—á—à–∏—Ç—å –ø—Ä–æ–º–ø—Ç—ã –∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ AI

2. **–ê—É–¥–∏—Ç:**
   - –í–∏–¥–Ω–æ, —á—Ç–æ –∏–∑–º–µ–Ω–∏–ª —á–µ–ª–æ–≤–µ–∫
   - –ò—Å—Ç–æ—Ä–∏—è –≤—Å–µ—Ö –∏–∑–º–µ–Ω–µ–Ω–∏–π

3. **–í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ:**
   - –ú–æ–∂–Ω–æ –≤–µ—Ä–Ω—É—Ç—å—Å—è –∫ RAW –¥–∞–Ω–Ω—ã–º
   - –ú–æ–∂–Ω–æ –æ—Ç–º–µ–Ω–∏—Ç—å –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ

4. **–û–±—É—á–µ–Ω–∏–µ:**
   - RAW –¥–∞–Ω–Ω—ã–µ –º–æ–∂–Ω–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥–ª—è –æ–±—É—á–µ–Ω–∏—è –º–æ–¥–µ–ª–µ–π
   - APPROVED –¥–∞–Ω–Ω—ã–µ ‚Äî –∫–∞–∫ —ç—Ç–∞–ª–æ–Ω –¥–ª—è –æ–±—É—á–µ–Ω–∏—è

## ‚úÖ –ò—Ç–æ–≥

**RAW –¥–∞–Ω–Ω—ã–µ** = –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ä–µ–∑—É–ª—å—Ç–∞—Ç AI (–º–æ–∂–µ—Ç –±—ã—Ç—å –Ω–µ—Ç–æ—á–Ω—ã–º)
**APPROVED –¥–∞–Ω–Ω—ã–µ** = –ø—Ä–æ–≤–µ—Ä–µ–Ω–Ω—ã–µ –∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ —á–µ–ª–æ–≤–µ–∫–æ–º –¥–∞–Ω–Ω—ã–µ (—Ç–æ—á–Ω—ã–µ)

–û–±–∞ –Ω–∞–±–æ—Ä–∞ –Ω—É–∂–Ω—ã –¥–ª—è –ø–æ–ª–Ω–æ—Ü–µ–Ω–Ω–æ–π —Ä–∞–±–æ—Ç—ã —Å–∏—Å—Ç–µ–º—ã! üéØ

