# Визуальный тест фронтенда

Тест проверяет визуальное отображение таблицы в браузере после парсинга документа.

## Что проверяется

1. **Визуальное отображение чисел**
   - Числа не обрезаны визуально (overflow: visible)
   - Коды УКТ ЗЕД полностью видны (10+ цифр)
   - Десятичные числа не потеряли знаки после запятой

2. **CSS стили**
   - `overflow: visible` для input/textarea элементов
   - `text-overflow: clip` (не ellipsis) для предотвращения обрезки
   - Правильные min-width для числовых колонок

3. **Порядок колонок**
   - Колонка "№" идет первой
   - Порядок соответствует `column_order` из данных

4. **Длинный текст в textarea**
   - Текст длиннее 30 символов должен быть в `<textarea>`, а не в `<input>`

5. **Видимость всех значений**
   - Все значения полностью видны (нет обрезки)
   - Нет `overflow: hidden` на ячейках

## Установка

```bash
# Установить Playwright (один раз)
./scripts/install_playwright.sh
```

## Запуск теста

```bash
# Запуск визуального теста (Docker должен быть запущен)
./scripts/test_frontend_visual_docker.sh
```

## Результаты

После выполнения теста создается временная директория с:
- `rendered_page.html` - полный HTML страницы
- `table_data.json` - данные таблицы
- `computed_styles.json` - вычисленные CSS стили
- `table_screenshot.png` - скриншот таблицы
- `detailed_table_report.json` - детальный отчет о таблице
- `error_report.json` - отчет об ошибках (если есть)

Путь к директории выводится в конце теста.

## Что делать при ошибках

1. Проверьте скриншот `table_screenshot.png`
2. Проверьте `computed_styles.json` - там видно реальные CSS стили
3. Проверьте `error_report.json` - там перечислены все найденные ошибки
4. Исправьте CSS в `static/style.css` или JS в `static/script.js`
5. Перезапустите тест

## Примеры ошибок

- ❌ `Input имеет overflow='hidden' вместо 'visible'` - нужно добавить `overflow: visible !important;`
- ❌ `Input имеет text-overflow='ellipsis'` - нужно изменить на `text-overflow: clip;`
- ❌ `Длинный текст (50 символов) в input вместо textarea` - нужно использовать `<textarea>` для длинного текста
- ❌ `Колонка '№' не первая` - нужно проверить порядок колонок в данных

