# Что такое JWT? (Простое объяснение)

## JWT - это НЕ программа!

**JWT** (JSON Web Token) - это **бесплатный открытый стандарт** (RFC 7519), который используется для безопасной передачи информации между сторонами.

## Что это такое?

JWT - это способ создания **токенов авторизации** (как пропуск или билет).

### Простая аналогия:

Представьте, что вы идете в кинотеатр:
1. Вы покупаете билет (входите в систему)
2. Вам выдают билет с печатью (JWT токен с подписью)
3. При входе в зал проверяют билет и печать (сервер проверяет токен)
4. Если печать подлинная - вы проходите (доступ разрешен)

## Как это работает в нашем приложении?

### 1. Пользователь входит в систему

```
Пользователь → POST /api/auth/login
              username: "admin"
              password: "mypassword"
```

### 2. Сервер проверяет пароль и создает JWT токен

```python
# Сервер создает токен с информацией о пользователе
token = {
    "username": "admin",
    "exp": "2025-01-15"  # срок действия
}
# Подписывает токен секретным ключом
signed_token = sign(token, JWT_SECRET_KEY)
```

### 3. Сервер возвращает токен пользователю

```json
{
  "access_token": "eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...",
  "token_type": "bearer"
}
```

### 4. Пользователь использует токен для доступа

```
Пользователь → GET /api/search/documents
              Authorization: Bearer eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9...
```

### 5. Сервер проверяет токен

```python
# Сервер проверяет подпись токена
if verify_signature(token, JWT_SECRET_KEY):
    # Токен подлинный - доступ разрешен
    allow_access()
else:
    # Токен подделан - доступ запрещен
    deny_access()
```

## Структура JWT токена

JWT токен состоит из трех частей, разделенных точками:

```
eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJzdWIiOiJhZG1pbiIsImV4cCI6MTczNjg5NjAwMH0.signature
│─────────────────────────────────││──────────────────────────────││──────────│
         Header (заголовок)              Payload (данные)          Signature (подпись)
```

### Header (заголовок)
```json
{
  "alg": "HS256",  // алгоритм подписи
  "typ": "JWT"     // тип токена
}
```

### Payload (данные)
```json
{
  "sub": "admin",           // username пользователя
  "exp": 1736896000         // срок действия (timestamp)
}
```

### Signature (подпись)
```
HMACSHA256(
  base64UrlEncode(header) + "." + base64UrlEncode(payload),
  JWT_SECRET_KEY
)
```

## Это бесплатно?

**ДА! JWT полностью бесплатен:**

1. ✅ **Стандарт открытый** - RFC 7519 (публичный документ)
2. ✅ **Библиотеки бесплатные** - `python-jose`, `PyJWT` и другие
3. ✅ **Не требует лицензий** - можно использовать в коммерческих проектах
4. ✅ **Не требует регистрации** - просто используйте библиотеки

## Какие библиотеки мы используем?

В нашем проекте используется библиотека **python-jose**:

```python
from jose import jwt  # Бесплатная библиотека
```

Установка:
```bash
pip install python-jose[cryptography]
```

## Преимущества JWT

1. **Безопасность** - токены подписываются, их нельзя подделать
2. **Без состояния** - серверу не нужно хранить сессии
3. **Масштабируемость** - легко использовать в микросервисах
4. **Стандарт** - используется везде (Google, Facebook, GitHub и т.д.)

## Где еще используется JWT?

JWT используется в:
- Google (авторизация в API)
- Facebook (авторизация приложений)
- GitHub (токены доступа)
- Microsoft (Azure AD)
- И многих других сервисах

## Резюме

- ❌ **JWT - НЕ программа**
- ✅ **JWT - это стандарт/технология**
- ✅ **JWT - полностью бесплатен**
- ✅ **JWT - открытый стандарт (RFC 7519)**
- ✅ **JWT - используется для авторизации**

В нашем проекте JWT используется для того, чтобы пользователи могли безопасно входить в систему и получать доступ к API без необходимости вводить пароль при каждом запросе.










